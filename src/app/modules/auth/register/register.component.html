<div class="login-wrapper" fxLayout="row" fxLayoutAlign="center center">
  <mat-card class="box">
    <mat-card-header>
      <mat-card-title>¡Regístrate!</mat-card-title>
    </mat-card-header>

    <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
      <mat-card-content>
        <mat-form-field class="full-width-input">
          <input
            formControlName="name"
            matInput
            placeholder="Nombre de usuario"
            required
          />
          <!-- Mostrar validación de error -->
          <mat-error *ngIf="isValidField('name')">
            {{ getErrorMessage("name") }}
          </mat-error>
        </mat-form-field>

        <mat-form-field class="full-width-input">
          <input
            formControlName="email"
            matInput
            placeholder="Correo"
            required
          />
          <!-- Mostrar validación de error -->
          <mat-error *ngIf="isValidField('email')">
            {{ getErrorMessage("email") }}
          </mat-error>
        </mat-form-field>

        <mat-form-field class="full-width-input">
          <input
            [type]="hide ? 'password' : 'text'"
            formControlName="password"
            matInput
            placeholder="Contraseña"
            required
          />
          <button
            type="button"
            mat-icon-button
            matSuffix
            (click)="hide = !hide"
          >
            <mat-icon>{{ hide ? "visibility_off" : "visibility" }} </mat-icon>
          </button>
          <!-- Mostrar validación de error -->
          <mat-error *ngIf="isValidField('password')">
            {{ getErrorMessage("password") }}
          </mat-error>
        </mat-form-field>

        <mat-form-field class="full-width-input">
          <input
            [type]="hide ? 'password' : 'text'"
            formControlName="confirmPassword"
            matInput
            placeholder="Confirmar contraseña"
            required
          />
          <button
            type="button"
            mat-icon-button
            matSuffix
            (click)="hide = !hide"
          >
            <mat-icon>{{ hide ? "visibility_off" : "visibility" }} </mat-icon>
          </button>
          <!-- Mostrar validación de error -->
          <mat-error *ngIf="isValidField('confirmPassword')">
            {{ getErrorMessage("confirmPassword") }}
          </mat-error>
        </mat-form-field>
        <!-- <mat-form-field class="full-width-input">
          <mat-label>Choose a role...</mat-label>
          <mat-select [(value)]="selected">
            <mat-option [value]="roles" *ngFor="let roles of Roles">{{ roles }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
      </mat-card-content>

      <button
        [disabled]="registerForm.invalid || isLoading == true"
        type="submit"
        mat-stroked-button
        color="accent"
        class="btn-block"
      >
        <span *ngIf="!isLoading">Registrarse</span>
        <div
          *ngIf="isLoading"
          fxLayout="row"
          fxLayoutAlign="center center"
          class="spinner"
        >
          <mat-progress-spinner
            mode="indeterminate"
            value="100"
            diameter="20"
          ></mat-progress-spinner>
        </div>
      </button>
    </form>
  </mat-card>
</div>
